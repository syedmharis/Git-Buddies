{"version":3,"file":"Prism.js","sources":["../../src/Prism/Prism.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport Highlight, { defaultProps, Language, PrismTheme } from 'prism-react-renderer';\nimport {\n  ActionIcon,\n  useMantineTheme,\n  Tooltip,\n  DefaultProps,\n  Selectors,\n  Box,\n  ScrollArea,\n  useComponentDefaultProps,\n  MantineColor,\n  MantineNumberSize,\n  MantineTheme,\n} from '@mantine/core';\nimport { useClipboard } from '@mantine/hooks';\nimport { CopyIcon } from './CopyIcon';\nimport { getPrismTheme as defaultGetPrismTheme } from './prism-theme';\nimport useStyles from './Prism.styles';\n\nexport type PrismStylesNames = Selectors<typeof useStyles>;\n\nexport interface PrismProps\n  extends DefaultProps<PrismStylesNames>,\n    Omit<React.ComponentPropsWithRef<'div'>, 'children'> {\n  variant?: string;\n\n  /** Code which will be highlighted */\n  children: string;\n\n  /** Programming language that should be highlighted */\n  language: Language;\n\n  /** True to remove copy to clipboard button */\n  noCopy?: boolean;\n\n  /** Copy button tooltip */\n  copyLabel?: string;\n\n  /** Copy button tooltip in copied state */\n  copiedLabel?: string;\n\n  /** Display line numbers */\n  withLineNumbers?: boolean;\n\n  /** Highlight line at given line number with color from theme.colors */\n  highlightLines?: Record<string, { color: MantineColor; label?: string }>;\n\n  /** Force color scheme, defaults to theme.colorScheme */\n  colorScheme?: 'dark' | 'light';\n\n  /** Change scroll area component */\n  scrollAreaComponent?: any;\n\n  /** Defines whether the code should be trimmed, defaults to true */\n  trim?: boolean;\n\n  /** Key of theme.radius or any valid CSS value to set border-radius, theme.defaultRadius by default */\n  radius?: MantineNumberSize;\n\n  /** Provide custom color scheme */\n  getPrismTheme?(theme: MantineTheme, colorScheme: 'light' | 'dark'): PrismTheme;\n}\n\nconst prismDefaultProps: Partial<PrismProps> = {\n  noCopy: false,\n  copyLabel: 'Copy code',\n  copiedLabel: 'Copied',\n  withLineNumbers: false,\n  trim: true,\n  highlightLines: {},\n  scrollAreaComponent: ScrollArea,\n  getPrismTheme: defaultGetPrismTheme,\n};\n\nexport const Prism = forwardRef<HTMLDivElement, PrismProps>((props: PrismProps, ref) => {\n  const {\n    className,\n    children,\n    language,\n    noCopy,\n    classNames,\n    styles,\n    copyLabel,\n    copiedLabel,\n    withLineNumbers,\n    highlightLines,\n    scrollAreaComponent: ScrollAreaComponent,\n    colorScheme,\n    trim,\n    unstyled,\n    radius,\n    getPrismTheme,\n    variant,\n    ...others\n  } = useComponentDefaultProps('Prism', prismDefaultProps, props);\n  const code = trim && typeof children === 'string' ? children.trim() : children;\n  const maxLineSize = code.split('\\n').length.toString().length;\n\n  const theme = useMantineTheme();\n  const clipboard = useClipboard();\n  const _colorScheme = colorScheme || theme.colorScheme;\n  const { classes, cx } = useStyles(\n    {\n      colorScheme: _colorScheme,\n      native: ScrollAreaComponent !== ScrollArea,\n      maxLineSize,\n      radius,\n    },\n    { name: 'Prism', classNames, styles, unstyled, variant }\n  );\n\n  return (\n    <Box className={cx(classes.root, className)} ref={ref} {...others} translate=\"no\">\n      {!noCopy && (\n        <Tooltip\n          label={clipboard.copied ? copiedLabel : copyLabel}\n          position=\"left\"\n          withArrow\n          arrowSize={6}\n          offset={6}\n          color={clipboard.copied ? 'teal' : undefined}\n          unstyled={unstyled}\n        >\n          <ActionIcon\n            className={classes.copy}\n            aria-label={clipboard.copied ? copiedLabel : copyLabel}\n            onClick={() => clipboard.copy(code)}\n            unstyled={unstyled}\n          >\n            <CopyIcon copied={clipboard.copied} />\n          </ActionIcon>\n        </Tooltip>\n      )}\n\n      <Highlight\n        {...defaultProps}\n        theme={getPrismTheme(theme, _colorScheme)}\n        code={code}\n        language={language}\n      >\n        {({\n          className: inheritedClassName,\n          style: inheritedStyle,\n          tokens,\n          getLineProps,\n          getTokenProps,\n        }) => (\n          <ScrollAreaComponent className={classes.scrollArea} dir=\"ltr\">\n            <pre className={cx(classes.code, inheritedClassName)} style={inheritedStyle} dir=\"ltr\">\n              {tokens\n                .map((line, index) => {\n                  if (\n                    index === tokens.length - 1 &&\n                    line.length === 1 &&\n                    line[0].content === '\\n'\n                  ) {\n                    return null;\n                  }\n\n                  const lineNumber = index + 1;\n                  const lineProps = getLineProps({ line, key: index });\n                  const shouldHighlight = lineNumber in highlightLines;\n                  const lineColor =\n                    _colorScheme === 'dark'\n                      ? theme.fn.rgba(\n                          theme.fn.themeColor(highlightLines[lineNumber]?.color, 9),\n                          0.25\n                        )\n                      : theme.fn.themeColor(highlightLines[lineNumber]?.color, 0);\n\n                  return (\n                    <div\n                      {...lineProps}\n                      className={cx(classes.line, lineProps.className)}\n                      style={{ ...(shouldHighlight ? { backgroundColor: lineColor } : null) }}\n                    >\n                      {withLineNumbers && (\n                        <div\n                          className={classes.lineNumber}\n                          style={{\n                            color: shouldHighlight\n                              ? theme.fn.themeColor(\n                                  highlightLines[lineNumber]?.color,\n                                  _colorScheme === 'dark' ? 5 : 8\n                                )\n                              : undefined,\n                          }}\n                        >\n                          {highlightLines[lineNumber]?.label || lineNumber}\n                        </div>\n                      )}\n\n                      <div className={classes.lineContent}>\n                        {line.map((token, key) => {\n                          const tokenProps = getTokenProps({ token, key });\n                          return (\n                            <span\n                              {...tokenProps}\n                              style={{\n                                ...tokenProps.style,\n                                color: shouldHighlight\n                                  ? theme.fn.themeColor(\n                                      highlightLines[lineNumber]?.color,\n                                      _colorScheme === 'dark' ? 5 : 8\n                                    )\n                                  : (tokenProps?.style?.color as string),\n                              }}\n                            />\n                          );\n                        })}\n                      </div>\n                    </div>\n                  );\n                })\n                .filter(Boolean)}\n            </pre>\n          </ScrollAreaComponent>\n        )}\n      </Highlight>\n    </Box>\n  );\n});\n\nPrism.displayName = '@mantine/prism/Prism';\n"],"names":["ScrollArea","defaultGetPrismTheme","forwardRef","useComponentDefaultProps","useMantineTheme","useClipboard","useStyles","React","Box","Tooltip","ActionIcon","CopyIcon","Highlight","defaultProps"],"mappings":"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"}